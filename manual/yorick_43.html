---
layout: default
headline: User Manual
anchor: '<a name="Negative-Index"></a>'
---
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="yorick_42.html#Pseudo_002dIndex" title="Previous section in reading order"><img src="../images/dm-prev.png" border="0" alt="Back: 2.3.5 Creating a pseudo-index" align="middle"/></a></td>
<td valign="middle" align="left"><a href="yorick_44.html#Rubber_002dIndex" title="Next section in reading order"><img src="../images/dm-next.png" border="0" alt="Forward: 2.3.7 Using a rubber index" align="middle"/></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="yorick_34.html#Arrays" title="Beginning of this chapter or previous chapter"><img src="../images/dm-2prev.png" border="0" alt="FastBack: 2. Using Array Syntax" align="middle"/></a></td>
<td valign="middle" align="left"><a href="yorick_37.html#Indexing" title="Up section"><img src="../images/dm-up.png" border="0" alt="Up: 2.3 Indexing" align="middle"/></a></td>
<td valign="middle" align="left"><a href="yorick_52.html#Graphics" title="Next chapter"><img src="../images/dm-2next.png" border="0" alt="FastForward: 3. Graphics" align="middle"/></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="yorick.html#Top" title="Cover (top) of document"><img src="../images/dm-top.png" border="0" alt="Top: Yorick: An Interpreted Language" align="middle"/></a></td>
<td valign="middle" align="left"><a href="yorick_toc.html#SEC_Contents" title="Table of contents"><img src="../images/dm-toc.png" border="0" alt="Contents: Table of Contents" align="middle"/></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="yorick_abt.html#SEC_About" title="About (help)"><img src="../images/dm-help.png" border="0" alt="About: About This Document" align="middle"/></a></td>
</tr></table>
<hr size="1"/>
<a name="Numbering-a-dimension-from-its-last-element"></a>
<h3 class="subsection">2.3.6 Numbering a dimension from its last element</h3>

<p>Array index values are subtly asymmetric: An index of 1 represents the
first element, 2 represents the second element, 3 the third, and so on.
In order to refer to the last, or next to last, or any element relative
to the final element, you apparently need to find out the length of the
dimension.
</p>
<p>In order to remedy this asymmetry, Yorick interprets numbers less than 1
relative to the final element of an array.  Hence, <kbd>x(1)</kbd> and
<kbd>x(2)</kbd> are the first and second elements of <kbd>x</kbd>, while
<kbd>x(0)</kbd> and <kbd>x(-1)</kbd> are the last and next to last elements, and
so on.
</p>
<p>With this convention for negative indices, many Yorick programs can
be written without the need to determine the length of a dimension:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">deriv = (f(3:0)-f(1:-2)) / (x(3:0)-x(1:-2));
</pre></td></tr></table>

<p>computes a point-centered estimate of the derivative of a function
<kbd>f</kbd> with values known at points <kbd>x</kbd>.  (A better way to compute
this derivative is to use the <kbd>pcen</kbd> and <kbd>dif</kbd> range functions
described below.  See <a href="yorick_47.html#Finite-Difference">Rank preserving (finite difference) range functions</a>.)
</p>
<p>In this example, the extra effort required to compute the array length
would be slight:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">n = numberof(f);
deriv = (f(3:n)-f(1:n-2)) / (x(3:n)-x(1:n-2));
</pre></td></tr></table>

<p>However, using the negative index convention produces faster code, and
generalizes to multi-dimensional cases in an obvious way.
</p>
<p>The negative index convention works for scalar index values and for the
start or stop field of an index range (as in the example).  Dealing with
negative indices in an index list would slow the code down too much, so
the values in an index list may not be zero or negative.
</p>


<hr size="1"/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="yorick_42.html#Pseudo_002dIndex" title="Previous section in reading order"><img src="../images/dm-prev.png" border="0" alt="Back: 2.3.5 Creating a pseudo-index" align="middle"/></a></td>
<td valign="middle" align="left"><a href="yorick_44.html#Rubber_002dIndex" title="Next section in reading order"><img src="../images/dm-next.png" border="0" alt="Forward: 2.3.7 Using a rubber index" align="middle"/></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="yorick_34.html#Arrays" title="Beginning of this chapter or previous chapter"><img src="../images/dm-2prev.png" border="0" alt="FastBack: 2. Using Array Syntax" align="middle"/></a></td>
<td valign="middle" align="left"><a href="yorick_37.html#Indexing" title="Up section"><img src="../images/dm-up.png" border="0" alt="Up: 2.3 Indexing" align="middle"/></a></td>
<td valign="middle" align="left"><a href="yorick_52.html#Graphics" title="Next chapter"><img src="../images/dm-2next.png" border="0" alt="FastForward: 3. Graphics" align="middle"/></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="yorick.html#Top" title="Cover (top) of document"><img src="../images/dm-top.png" border="0" alt="Top: Yorick: An Interpreted Language" align="middle"/></a></td>
<td valign="middle" align="left"><a href="yorick_toc.html#SEC_Contents" title="Table of contents"><img src="../images/dm-toc.png" border="0" alt="Contents: Table of Contents" align="middle"/></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="yorick_abt.html#SEC_About" title="About (help)"><img src="../images/dm-help.png" border="0" alt="About: About This Document" align="middle"/></a></td>
</tr></table>

